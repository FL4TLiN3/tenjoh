'use strict';var Tenjoh=function(){var a=this;a.addComponent=function(c,g,d){var e=c.indexOf(".");isUndefined(d)&&(d=a);-1==e?d[c]=g():(isUndefined(d[c.slice(0,e)])&&(d[c.slice(0,e)]={}),a.addComponent(c.slice(e+1),g,d[c.slice(0,e)]))};a.__widgets={};a.addWidget=function(c,g){isEmpty(a.__widgets[c])&&(a.__widgets[c]=g)};a.getWidget=function(c,g){var d=new a.__widgets[c];d.__caller=g;return d};a.uniqueId=function(){return parseInt(1E6*Math.random()).toString(16)}},$boolean="boolean",$console="console",
$length="length",$name="name",$object="object",$string="string",$number="number",$undefined="undefined",Error=window.Error,$root,$tenjoh=window.$tenjoh||(window.$tenjoh=new Tenjoh);
(function(){if(!Object.clone){if(!Object.create||"valueOf"in Object.create(null))return Error("ECMAScript 5 needed");var a=Array.prototype.slice,c=Array.isArray,g=Object.defineProperty,d=Object.getPrototypeOf,e=Object.getOwnPropertyNames,b=Object.getOwnPropertyDescriptor,i=Object.prototype.hasOwnProperty,f=function(b){return{value:b,enumerable:!1,writable:!0,configurable:!0}},h=function(b){return function(c){return typeof c in b||null===c}}({"null":1,undefined:1,"boolean":1,number:1,string:1});[Boolean,
Number,String,Function].forEach(function(b){g(b.prototype,"clone",f(function(){return this.valueOf()}))});[Date,RegExp].forEach(function(b){g(b.prototype,"clone",f(function(b){return b?new this.constructor(this):this}))});var k=function j(a,f,k){if(h(a))return a;if(c(a)||"function"===typeof a)return a.clone(f,k);var l=d(a);if(l){if("function"===typeof l.cloneNode)return a.cloneNode(f);if(!k&&i.call(l,"clone"))return l.clone.call(a,f,k)}var q=Object.create(l);e(a).forEach(function(c){var d=b(a,c);
d?(f&&"value"in d&&(d.value=j(a[c],f,k)),g(q,c,d)):q[c]=j(a[c],f,k)});return q};g(Array.prototype,"clone",f(function(b,c){return!b?a.call(this):this.map(function(a){return k(a,b,c)})}));g(Object.prototype,"clone",f(function(b){return k(this,b,!0)}));g(Object,"isPrimitive",f(h));g(Object,"clone",f(k))}})(this);String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")};String.prototype.replaceAll=function(a,c){return this.split(a).join(c)};
String.prototype.replaceFirst=function(a,c){var g;return-1!=this.indexOf(a)?(g=this.slice(0,this.indexOf(a)),g=g+c+this.slice(this.indexOf(a)+a.length)):this};function noop(){}function now(){return(new Date).getTime()}function lowercase(a){return isString(a)?a.toLowerCase():a}function uppercase(a){return isString(a)?a.toUpperCase():a}function isUndefined(a){return typeof a===$undefined}function isDefined(a){return typeof a!==$undefined}
function isObject(a){return null!=a&&typeof a==$object&&!isArray(a)}function isTypeObject(a){return null!=a&&typeof a==$object&&!isArray(a)}function isArray(a){return"[object Array]"==Object.prototype.toString.apply(a)}function isNumber(a){return"number"==typeof a}function isString(a){return typeof a==$string}function isFunction(a){return"function"==typeof a}function isBoolean(a){return typeof a==$boolean}function isEmpty(a){return isUndefined(a)||null==a||isEmptyObject(a)}
function isEmptyObject(a){return typeof a==$object&&0==a.length}function getRandomArbitary(a,c){return Math.random()*(c-a)+a}function getRandomInt(a,c){return Math.floor(Math.random()*(c-a+1))+a}
function forEach(a,c,g){var d;if(a)if(isFunction(a))for(d in a)"prototype"!=d&&d!=$length&&d!=$name&&a.hasOwnProperty(d)&&c.call(g,a[d],d);else if(a.forEach&&a.forEach!==forEach)a.forEach(c,g);else if(isObject(a)&&isNumber(a.length))for(d=0;d<a.length;d++)c.call(g,a[d],d);else for(d in a)c.call(g,a[d],d);return a}function sortedKeys(a){var c=[],g;for(g in a)a.hasOwnProperty(g)&&c.push(g);return c.sort()}
function forEachSorted(a,c,g){for(var d=sortedKeys(a),e=0;e<d.length;e++)c.call(g,a[d[e]],d[e]);return d}function zeroPadding(a,c){for(;a.length<c;)a="0"+a;return a}
window.sprintf||function(){var a={i:32785,d:32785,u:32801,o:33121,x:33377,X:37473,f:146,c:10240,s:132},c=/%(?:(\d+)\$)?(#|0)?(\d+)?(?:\.(\d+))?(l)?([%iduoxXfcs])/g;window.sprintf=function(g){var d=1,e=0,b=arguments;return g.replace(c,function(c,f,h,k,g,j,o){if("%"===o)return"%";var c="",j=a[o],p;e=f?parseInt(f):d++;j&1024||(c=void 0===b[e]?"":b[e]);j&3&&(c=j&1?parseInt(c):parseFloat(c),c=isNaN(c)?"":c);j&4&&(c=(("s"===o?c:o)||"").toString());j&32&&(c=0<=c?c:c%4294967296+4294967296);j&768&&(c=c.toString(j&
256?8:16));j&64&&"#"===h&&(c=(j&256?"0":"0x")+c);j&128&&g&&(c=j&2?c.toFixed(g):c.slice(0,g));j&24576&&(p="number"!==typeof c||0>c);j&8192&&(c=p?"":String.fromCharCode(c));j&32768&&(h="0"===h?"":h);c=j&4096?c.toString().toUpperCase():c.toString();j&2048||void 0===k||c.length>=k||(f=Array(k-c.length+1).join(!h?" ":"#"===h?" ":h),c=j&16&&"0"===h&&!c.indexOf("-")?"-"+f+c.slice(1):f+c);return c})}}();
$tenjoh.addComponent("Array",function(){return new function(){var a=this;a.hasValue=function(c,a){for(var d=!1,e=0;e<c.length;e++)c[e]==a&&(d=!0);return d};a.merge=function(c,g){for(var d=0;d<g.length;d++)a.hasValue(c,g[d])||c.push(g[d]);return c}}});
$tenjoh.addComponent("DOM",function(){return new function(){var a=["input","textarea","select","button"];this.getValue=function(c){if("INPUT"==c.nodeName)switch(c.type){case "img":return c.getAttribute("src");case "text":case "password":case "radio":case "button":case "submit":case "reset":case "hidden":return c.value;case "checkbox":return c.checked}else{if("TEXTAREA"==c.nodeName||"SELECT"==c.nodeName||"SPAN"==c.nodeName)return c.innerHTML;if("IMG"==c.nodeName)return c.getAttribute("src")}};this.setValue=
function(c,a){if("INPUT"==c.nodeName)switch(c.type){case "text":case "password":case "radio":case "button":case "submit":case "reset":case "hidden":c.setAttribute("value",a);break;case "checkbox":typeof a==$boolean&&c.setAttribute("checked",a)}else"TEXTAREA"==c.nodeName||"SELECT"==c.nodeName||"SPAN"==c.nodeName?c.innerHTML=a:"IMG"==c.nodeName&&c.setAttribute("src",a)};this.findInputElements=function(c){var g=[],d;a.forEach(function(a){d=c.getElementsByTagName(a);isEmpty(d)||(g=$tenjoh.Array.merge(g,
d))});return g};this.isElement=function(c){return c&&typeof c==$object&&-1!=c.__proto__.constructor.name.indexOf("HTML")&&-1!=c.__proto__.constructor.name.indexOf("Element")};this.isTextNode=function(c){return c&&c.nodeType&&3==c.nodeType};this.isCommentNode=function(c){return c&&c.nodeType&&8==c.nodeType};this.isInputElement=function(c){return-1==a.indexOf(lowercase(c.tagName))?!1:!0};this.isPartialElement=function(c){return c.hasAttribute("data-partial")};this.isWidgetElement=function(c){return c.hasAttribute("data-widget")};
this.createElement=function(c,a,d){var e;switch(c){case "img":e=document.createElement("img");e.setAttribute("src",a);break;case "text":case "password":case "submit":case "reset":case "hidden":e=document.createElement("input");e.setAttribute("type",c);e.setAttribute("value",a);d&&d["data-property-name"]&&e.setAttribute("name",d["data-property-name"]);break;case "checkbox":e=document.createElement("input");e.setAttribute("type",c);typeof a==$boolean&&e.setAttribute("checked",a);break;case "radio":return createRadioButtons(c,
a,d);default:e=document.createElement(c),e.innerHTML=a}for(var b in d)d.hasOwnProperty(b)&&"fillterName"!=b&&e.setAttribute(b,d[b]);e.hasAttribute("id")||e.setAttribute("id","tenjoh#"+$tenjoh.uniqueId());return e}}});
$tenjoh.addComponent("Event",function(){return new function(){this.onPartialLoad=document.createEvent("UIEvent");this.onPartialLoad.initUIEvent("onPartialLoad",!0,!1);this.onHashChange=document.createEvent("UIEvent");this.onHashChange.initUIEvent("onHashChange",!0,!1);this.onFinishTraversal=document.createEvent("UIEvent");this.onFinishTraversal.initUIEvent("onFinishTraversal",!0,!1)}});
$tenjoh.addComponent("XHR",function(){return new function(){var a=this;a.get=function(c,g,d,e){var b;isBoolean(g)?(e=g,d=g=noop):(isEmpty(e)&&(e=!0),isEmpty(g)&&(g=noop),isEmpty(d)&&(d=noop));b=new XMLHttpRequest;b.onreadystatechange=function(){a.callback(b,g,d)};b.open("GET",c,e);b.send();return a.after(b,e)};a.post=function(c,g,d,e,b){var i=new XMLHttpRequest,f="";isBoolean(d)?(b=d,e=d=noop):(isEmpty(b)&&(b=!0),isEmpty(d)&&(d=noop),isEmpty(e)&&(e=noop));i.onreadystatechange=function(){a.callback(i,
d,e)};for(var h in g)"clone"!=h&&(f=f.concat(h).concat("=").concat(g[h]).concat("&"));i.open("POST",c,b);i.setRequestHeader("Content-Type","application/x-www-form-urlencoded");i.send(f);return a.after(i,b)};a.del=function(c,g,d,e){var b;isBoolean(g)?(e=g,d=g=noop):(isEmpty(e)&&(e=!0),isEmpty(g)&&(g=noop),isEmpty(d)&&(d=noop));b=new XMLHttpRequest;b.onreadystatechange=function(){a.callback(b,g,d)};b.open("DELETE",c,e);b.send();return a.after(b,e)};a.callback=function(c,a,d){4==c.readyState&&"200"==
c.status&&(!isEmpty($tenjoh.options.XHR)&&!isEmpty($tenjoh.options.XHR.status200)&&!a?$tenjoh.options.XHR.status200(c.responseText):a(c.responseText));4==c.readyState&&"400"==c.status&&(!isEmpty($tenjoh.options.XHR)&&!isEmpty($tenjoh.options.XHR.status400)&&!d?$tenjoh.options.XHR.status400(c.responseText):d(c.responseText));4==c.readyState&&"401"==c.status&&(!isEmpty($tenjoh.options.XHR)&&!isEmpty($tenjoh.options.XHR.status401)&&!d?$tenjoh.options.XHR.status401(c.responseText):d(c.responseText));
4==c.readyState&&"404"==c.status&&(!isEmpty($tenjoh.options.XHR)&&!isEmpty($tenjoh.options.XHR.status404)&&!d?$tenjoh.options.XHR.status404(c.responseText):d(c.responseText));4==c.readyState&&"405"==c.status&&(!isEmpty($tenjoh.options.XHR)&&!isEmpty($tenjoh.options.XHR.status405)&&!d?$tenjoh.options.XHR.status405(c.responseText):d(c.responseText));4==c.readyState&&"500"==c.status&&(!isEmpty($tenjoh.options.XHR)&&!isEmpty($tenjoh.options.XHR.status500)&&!d?$tenjoh.options.XHR.status500(c.responseText):
d(c.responseText))};a.after=function(c,a){return a?c:"200"==c.status?c.responseText:!1};a.indicatorStart=function(){if(void 0!=$root){var c=document.createElement("span");c.id="indicator";c.innerHTML='<img src="/img/indicator.black.gif"/>';var a=$root.rootElement.childNodes[0];void 0!=a&&"indicator"!=a.firstChild.id&&a.insertBefore(c,a.firstChild)}};a.indicatorStop=function(){var c=$root.rootElement.childNodes[0];void 0!=c&&c.removeChild(c.firstChild)}}});
$tenjoh.addComponent("Router",function(){return new function(){var a=this,c=!0,g=null;a.delay=300;a.hash="";a.getHash=function(c){c=c||location.href;return c.replace(/^[^#]*#?(.*)$/,"$1")};a.start=function(){c&&(c=!1,a.hash=a.getHash(),a.dispatch());g||a.poll();document.addEventListener("onHashChange",function(){a.dispatch()},!1)};a.poll=function(){var c=a.getHash();a.hash!==c&&(a.hash=c,document.dispatchEvent($tenjoh.Event.onHashChange));g=setTimeout(a.poll,a.delay)};a.dispatch=function(){var c,
e={};a.hash.split(/[\?\&]{1}/).forEach(function(b){-1!=b.indexOf("!")?c=b.substring(b.indexOf("!")+1):e[b.split("=")[0]]=b.split("=")[1]});isEmpty(c)?$tenjoh.UI.createPartial("Index",$root.rootElement.getAttribute("data-partial"),$root.rootElement,e):$tenjoh.UI.createPartial("Index",c,$root.rootElement,e)}}});
$tenjoh.addComponent("Cache",function(){return new function(){var a=this;a.has=function(c){return null!==sessionStorage.getItem(c)};a.get=function(c){return a.has(c)?JSON.parse(sessionStorage.getItem(c)):null};a.set=function(c,a){sessionStorage.setItem(c,JSON.stringify(a))};a.remove=function(c){var a=get(c);sessionStorage.setItem(c,null);return a};a.clear=function(){sessionStorage.clear()}}});
$tenjoh.addComponent("Storage",function(){return new function(){var a=this;a.has=function(c){return null!==localStorage.getItem(c)};a.get=function(c){return a.has(c)?JSON.parse(localStorage.getItem(c)):null};a.set=function(c,a){localStorage.setItem(c,JSON.stringify(a))};a.remove=function(c){var g=a.get(c);localStorage.removeItem(c);return g};a.clear=function(){localStorage.clear()}}});
$tenjoh.addComponent("Resource",function(){return new function(){var a=this;a.__resources=[];a.addImage=function(c,g,d){var e=new Image;e.src=g;var b={loaded:!1};e.addEventListener("load",function(){b.loaded=!0});b.id=c;b.image=e;b.ignoreGC=!isEmpty(d)&&!0===d?!0:!1;a.__resources.forEach(function(b,d){b.id==c&&a.__resources.splice(d,1)});a.__resources.unshift(b);return b.image};a.get=function(c){for(var g=0;g<a.__resources.length;g++)if(a.__resources[g].id==c)return c=a.__resources.splice(g,1)[0],
a.__resources.unshift(c),c};a.getImage=function(c){for(var g=0;g<a.__resources.length;g++)if(a.__resources[g].id==c){c=a.__resources.splice(g,1)[0];a.__resources.unshift(c);if(isEmpty(c.image))break;return c.image}}}});
$tenjoh.addComponent("Compiler",function(){return new function(){var a=this,c=/\{\{([^{}]+)\}\}/gm,g=/^\s*[^\s]+/,d=/([^:\s]+)\s*:\s*'([^']+)'/g,e=/([^:\s]+)\s*:\s*([0-9\.]+)/g,b=/([^:\s]+)\s*:\s*([^0-9:\s'"][^:\s'"]+)/g,i=/(?:(^[0-9\.]+$)|^'((?:[^\\']|\\.)*)'$|^"((?:[^\\"]|\\.)*)"$)/gm;a.hasDoubleCurly=function(b){return b&&!(-1==b.indexOf("{{")||-1==b.lastIndexOf("}}"))};var f=function(b){return b.replace(/\\(.)/gm,function(b,c){return c})},h=function(b){return b.replace(i,function(b,c,a,d){return a||
""==a?f(a):d||""==d?f(d):c})},k=function(b,c){var a;a=new $tenjoh.UI.PartialBuilder;a.name=b.getAttribute("data-name");a.url=b.getAttribute("data-partial");a.element=b;a.parent=c;a=a.create();c.__children.push(a)},n=function(b,c){var a=b.getAttribute("data-widget"),a=$tenjoh.getWidget(a,c),d=b.attributes,e;if(isEmpty(a))return!1;for(var f=0;f<d.length;f++)e=d[f],"data-widget"!=e.name&&(a[e.name.replaceAll("data-","")]=e.value);a.load(b)},j=function(c,a){var f=c.split("|"),h=[],k=f[0].trim();f.slice(1).forEach(function(f){var n=
f.trim(),f={},j;if(-1==n.indexOf(":"))f.fillterName=n;else{for(f.fillterName=n.match(g)[0].trim();j=d.exec(n);)f[j[1]]=j[2];for(;j=e.exec(n);)f[j[1]]=-1==j[2].indexOf(".")?parseInt(j[2]):parseFloat(j[2]);for(;j=b.exec(n);)f[j[1]]=a.getProperty(j[2])}f["data-property-name"]=k;f["data-template"]=c;h.push(f)});return h},o=function(b,c,a,d){if(0<c.length)for(var f=0;f<c.length;f++)b=$tenjoh.UI.Fillter.execFillter(c[f].fillterName,b,a,c[f],d);return b},p=function(b,c,a){var d;isEmpty(a)&&(a=!1);b=b.replaceFirst("{{",
"");b=b.replaceFirst("}}","");if(-1==b.indexOf("|"))return b=b.trim(),i.test(b)?h(b):isUndefined(c.getProperty(b))?!1:""+c.getProperty(b);d=j(b,c);b=b.split("|")[0].trim();return i.test(b)?o(h(b),d,c,a):isUndefined(c.getProperty(b))?!1:o(c.getProperty(b),d,c,a)},m=function(b,a,d){var f,e=[];f=b.wholeText.match(c);if(!(1>f.length)){for(a=0;a<f.length;a++)e.push({key:f[a],value:p(f[a],d.getController(),!0)}),$tenjoh.DOM.isElement(void 0)&&d.getController().bindElement(void 0);d=l(b,e);f=b.parentNode;
f.replaceChild(d[0],b);if(1<d.length)for(a=1;a<d.length;a++)f.insertBefore(d[a],d[a-1].nextSibling)}},l=function(b,c){var a=b.wholeText,d,f,e,h=[],k=function(b,a){var c=b.clone();0==c.length||!isString(a)||!isString(c[c.length-1])?c.push(a):c[c.length-1]+=a;return c};do{d=a.length;for(var n=0;n<c.length;n++)f=a.indexOf(c[n].key),-1==f||f>=d||(d=f,e=c[n]);if(d==a.length){h=k(h,a);break}else 0==d?(h=k(h,e.value),a=a.substr(e.key.length)):0<d&&(h=k(h,a.substr(0,d)),h=k(h,e.value),a=a.substr(d+e.key.length))}while(0!=
a.length);return function(b){for(var b=b.clone(),a=0;a<b.length;a++)isString(b[a])&&(b[a]=document.createTextNode(b[a]));return b}(h)},q=function(b,d){for(var f,e,h=0;h<b.attributes.length;h++)if(a.hasDoubleCurly(b.attributes[h].value)){f=b.attributes[h].value.match(c);for(var k=0;k<f.length;k++)(e=p(f[k],d.getController(),!0))&&b.setAttribute(b.attributes[h].name,b.attributes[h].value.replaceFirst(f[k],e))}};a.compileElement=function(b,c){for(var d,f=[],e=document.createNodeIterator(b,NodeFilter.SHOW_ELEMENT+
NodeFilter.SHOW_TEXT,{acceptNode:function(){return NodeFilter.FILTER_ACCEPT}},!1);d=e.nextNode();)d!==b&&!$tenjoh.DOM.isTextNode(d)&&(d.hasAttributes()&&q(d,c),$tenjoh.DOM.isPartialElement(d)?f.push({fn:k,node:d,partial:c}):$tenjoh.DOM.isWidgetElement(d)&&f.push({fn:n,node:d,partial:c}));for(d=0;d<f.length;d++)f[d].fn===k&&f[d].fn(f[d].node,f[d].partial),f[d].fn===n&&f[d].fn(f[d].node,f[d].partial);for(e=document.createNodeIterator(b,NodeFilter.SHOW_ELEMENT+NodeFilter.SHOW_TEXT,{acceptNode:function(){return NodeFilter.FILTER_ACCEPT}},
!1);d=e.nextNode();)d!==b&&$tenjoh.DOM.isTextNode(d)&&a.hasDoubleCurly(d.wholeText)&&m(d,b,c)}}});
$tenjoh.addComponent("UI",function(){return new function(){var a=this;a.createPartial=function(c,g,d,e){var b=new a.PartialBuilder;b.name=c;b.url=g;b.element=d;isEmpty(e)||(b.defaultParam=e);return b.create()};a.PartialBuilder=function(){var a=this;a.name=null;a.url=null;a.element=null;a.defaultParam={};a.parent=null;a.create=function(g){var d;isEmpty(g)&&(g=!0);if(g&&!a.element)throw Error("partial element is not set");d=$tenjoh.UI.Partial.create(a.name,a.url,a.element,a.defaultParam);$root.setPartial(d);
d.__parent=a.parent;d.getParent()||document.dispatchEvent($tenjoh.Event.onPartialLoad);g&&d.getController().load&&d.getController().load();return d}}}});
$tenjoh.addComponent("UI.Partial",function(){return new function(){var a=function(){this.template=this.script=this.url="";this.expire=now()+6E5},c=function(b,a,c,d){var f=this;f.name=b;f.__parent=null;f.getParent=function(){return f.__parent};f.__children=[];f.getChild=function(b){return f.__children[b]};f.sizeOfChildren=function(){return f.__children.length};f.__scheme=c;f.getScheme=function(){return f.__scheme};f.__controller=h(f,d);f.__controller.__partial=f;f.getController=function(){return f.__controller};
f.__scriptTagId;f.setScriptTagId=function(b){f.__scriptTagId=b};f.removeScriptTag=function(){document.remove(f.__scriptTagId)};f.__view;f.getView=function(){return f.__view};f.initView=function(b){isEmpty(b)||(f.__view=b);f.__view.innerHTML=f.__scheme.template.replaceAll("self.",sprintf("$root.getPartial('%s').getController().",f.name));$tenjoh.Compiler.compileElement(f.__view,f)};if(!1!==a&&!isEmpty(a))f.__view=a,f.initView();else if(!1===a||isEmpty(a))f.__view=null;f.discard=function(){$root.discardPartial(b)}},
g=function(b){return b.replaceAll(/\/\/.+/,"").replaceAll(/[\r\n]/,"").replaceAll(/<\!--[\s\S]*?--\>/,"")},d=function(b){if($tenjoh.Storage.has(b)){if($tenjoh.options.partialCache&&$tenjoh.Storage.get(b).expire<=now())return!0;$tenjoh.Storage.remove(b);return!1}},e=function(b){return $tenjoh.Storage.get(b)},b=function(b){var a;a=f(b,$tenjoh.XHR.get(b,!1));$tenjoh.Storage.set(b,a);return a},i=function(b){$tenjoh.XHR.get(b,function(a){$tenjoh.Storage.set(b,f(b,a))})},f=function(b,c){var d=new a;d.url=
b;var f;f=g(c).match(/<script.*>.+<\/script>/mg).join("").replaceAll(/<script type="text\/javascript">/,"").replaceAll(/<\/script>/,"");d.script=f;f=g(c).replaceAll(/<script.*>.+<\/script>/m,"");d.template=f;return d},h=function(b,a){var c,d;c=b.getScheme().script.replace(/\$controller/,sprintf('$root.__controllers["%s"]',b.name));var f=document.createElement("script");f.id="tenjoh#"+$tenjoh.uniqueId();f.type="text/javascript";f.text=c;document.body.appendChild(f);c=$root.getController(b.name);c.prototype=
new $tenjoh.Controller(b);for(d in a)a.hasOwnProperty(d)&&(c.prototype[d]=a[d]);d=new c;d.getWatcher().setController(d);f.parentNode.removeChild(f);return d};this.preload=function(b,a){d(a)||i(a)};this.create=function(a,f,h,g){return new c(a,h,(d(f)?e:b)(f),g)}}});
$tenjoh.addComponent("UI.Fillter",function(){return new function(){var a=this;a.__filters={};a.addFilter=function(c,g){isEmpty(a.__filters[c])&&(a.__filters[c]=g)};a.getFilter=function(c){return a.__filters[c]};a.execFillter=function(c,g,d,e,b){return a.getFilter(c)(g,d,e,b)}}});
$tenjoh.addComponent("Animation",function(){var a=function(a,b){this.x=a;this.y=b},c=function(c,b,d,f){var h=this;h.x=c;h.y=b;h.width=d;h.height=f;h.getPoint=function(){return new a(h.x,h.y)};h.getCenter=function(){return new a(h.width/2+h.x,h.height/2+h.y)}},g=function(a,b){this.start=a;this.end=b;this.duration=b-a},d=function(d){var b=this,i=0,f=function(a){try{for(var c=0;c<b.__necessaryResource.length;c++)if(!$tenjoh.Resource.get(b.__necessaryResource[c]).loaded)throw"resource is not loaded";
b.canvas=document.getElementById(a);b.width=b.canvas.getAttribute("width");b.height=b.canvas.getAttribute("height");b.__ready=!0}catch(d){if(1E3<i)throw d;setTimeout(function(){f(a);i++},10)}};setTimeout(function(){f(d)},1);b.amountOfChange=function(b,a){return a-b};b.delta=function(a,c,d){return b.amountOfChange(a,c)/d};b.debug=!isEmpty($tenjoh.options.debugAnimation)&&!0===$tenjoh.options.debugAnimation;b.__elementId=d;b.getElementId=function(){return b.__elementId};b.canvas;b.context;b.width;b.height;
b.objects={};b.__ready=!1;b.isReady=function(){return b.__ready};b.__start=!1;b.isStart=function(){return b.__start};b.__pose=!1;b.isPose=function(){return b.__pose};b.__finished=!1;b.isFinished=function(){return b.__finished};b.__necessaryResource;b.setNecessaryResource=function(a){b.__necessaryResource=a};b.beforeAnimate=!1;b.__onFinish;b.setOnFinish=function(a){b.__onFinish=a};b.__beforeAnimate;b.setBeforeAnimate=function(a){b.__beforeAnimate=a};b.__drawFunction;b.setDrawFunction=function(a){b.__drawFunction=
a};b.__defaultFrameRate=29.97;b.__frameRate=b.__defaultFrameRate;b.__lastFrameTime;b.currentTS;b.startTS;b.now;b.makePoint=function(b,c){return new a(b,c)};b.makeRect=function(b,a,d,f){return new c(b,a,d,f)};b.makeTimer=function(b,a){a=isEmpty(a)?1E4:a;return new g(b,a)};b.setStartTime=function(){b.startTS=now()};b.clear=function(){b.canvas.getContext("2d").clearRect(0,0,b.width,b.height)};b.animate=function(){var a,c,d=1E3/b.__frameRate;b.context=b.canvas.getContext("2d");a=now();b.currentTS=a;b.now=
b.currentTS-b.startTS;b.beforeAnimate||(b.__beforeAnimate(b),b.beforeAnimate=!0);b.__pose||((b.clear(),b.__drawFunction(b))?(c=now(),a=c-a,b.debug&&(b.context.save(),b.context.font="31px",b.context.strokeStyle="red",b.context.strokeText(b.__frameRate,20,20),b.context.restore()),b.__frameRate=1E3/a,d<=a)?setTimeout(b.animate,0):(b.__frameRate>=b.__defaultFrameRate&&(b.__frameRate=b.__defaultFrameRate),d=1E3/b.__frameRate,setTimeout(b.animate,d-a)):(b.__finished=!0,b.debug&&(d=now()-b.startTS,d=sprintf("%d:%d:%d.%d",
d/60/60/1E3,d/60/1E3,d/1E3,d%1E3),b.context.save(),b.context.font="31px",b.context.strokeStyle="red",b.context.strokeText(d,20,20),b.context.restore()),b.__onFinish&&b.__onFinish()))};b.pose=function(){b.__lastFrameTime=now();b.__pose=!0};b.play=function(a){var c=b.__lastFrameTime-b.startTS;b.__finished=!1;b.__pose&&(b.startTS=now()-c,b.__pose=!1);isEmpty(a)||(b.startTS=now()+a);b.animate()};b.drawImage=function(a,c,d){if(!isEmpty(d)&&(b.currentTS<d.start||b.currentTS>=d.end))return!1;b.context.drawImage(a,
c.x,c.y,c.width,c.height)};b.drawImageRotate=function(a,c,d,f){if(!isEmpty(d)&&(b.currentTS<d.start||b.currentTS>=d.end))return!1;d=f*Math.PI/180;f=c.getCenter();b.context.save();b.context.setTransform(1,0,0,1,0,0);b.context.translate(f.x,f.y);b.context.rotate(d);b.context.translate(-f.x,-f.y);b.context.drawImage(a,c.x,c.y,c.width,c.height);b.context.restore()};b.drawImageAnimate=function(a,d,f,e){var g,i,m=1,l;isEmpty(f)&&(f=d);if(!isEmpty(e)){isEmpty(e.timer)&&(e.timer=b.makeTimer(0));if(b.now<
e.timer.start)return;if(b.now>=e.timer.start&&b.now<e.timer.end)!isEmpty(e.timingFunction)&&isFunction(e.timingFunction)?g=new c(e.timingFunction(b.now-e.timer.start,d.x,b.amountOfChange(d.x,f.x),e.timer.duration),e.timingFunction(b.now-e.timer.start,d.y,b.amountOfChange(d.y,f.y),e.timer.duration),e.timingFunction(b.now-e.timer.start,d.width,b.amountOfChange(d.width,f.width),e.timer.duration),e.timingFunction(b.now-e.timer.start,d.height,b.amountOfChange(d.height,f.height),e.timer.duration)):!isEmpty(e.timingFunction)&&
isObject(e.timingFunction)&&(g=new c(e.timingFunction.x(b.now-e.timer.start,d.x,b.amountOfChange(d.x,f.x),e.timer.duration),e.timingFunction.y(b.now-e.timer.start,d.y,b.amountOfChange(d.y,f.y),e.timer.duration),e.timingFunction.width(b.now-e.timer.start,d.width,b.amountOfChange(d.width,f.width),e.timer.duration),e.timingFunction.height(b.now-e.timer.start,d.height,b.amountOfChange(d.height,f.height),e.timer.duration)));else{if(!isEmpty(e.drawAfterAnimate)&&!1===e.drawAfterAnimate)return;g=f}i=g.getCenter();
isEmpty(e.rotateCenter)||(i=e.rotateCenter);isEmpty(e.angle)?isEmpty(e.angle)&&!isEmpty(e.startAngle)&&!isEmpty(e.endAngle)?isEmpty(e.rotationDirection)||1===e.rotationDirection?(l=e.startAngle+b.delta(e.startAngle,e.endAngle,e.timer.end-e.timer.start)*(b.now-e.timer.start),l=l*Math.PI/180,l<e.startAngle*Math.PI/180?l=e.startAngle*Math.PI/180:l>e.endAngle*Math.PI/180&&(l=e.endAngle*Math.PI/180)):-1===e.rotationDirection&&(l=e.startAngle+b.delta(e.startAngle,e.endAngle,e.timer.end-e.timer.start)*(b.now-
e.timer.start),l=l*Math.PI/180,l<e.endAngle*Math.PI/180?l=e.endAngle*Math.PI/180:l>e.startAngle*Math.PI/180&&(l=e.startAngle*Math.PI/180)):l=0:l=e.angle*Math.PI/180;if(isEmpty(e.alpha))isEmpty(e.alpha)&&!isEmpty(e.startAlpha)&&!isEmpty(e.endAlpha)?(m=e.startAlpha+b.delta(e.startAlpha,e.endAlpha,e.timer.end-e.timer.start)*(b.now-e.timer.start),0>m?m=0:1<m&&(m=1)):m=1;else if(isString(e.alpha))switch(e.alpha){case "fadeInOut":d=(b.now-(e.timer.start-b.startTS))%e.iterationDuration,m=0>d?0:(Math.sin(360*
d/e.iterationDuration*Math.PI/180)+1)/2}else isNumber(e.alpha)&&(m=e.alpha)}b.context.save();b.context.setTransform(1,0,0,1,0,0);b.context.translate(i.x,i.y);b.context.rotate(l);b.context.translate(-i.x,-i.y);b.context.globalAlpha=m;b.context.drawImage(a,g.x,g.y,g.width,g.height);b.context.restore()};b.drawRectAnimate=function(a,d,f){var e,g,i=f.angle*Math.PI/180,m;if(!isEmpty(f)){isEmpty(f.timer)&&(f.timer=b.makeTimer(0));if(b.now<f.timer.start)return;if(b.now>=f.timer.start&&b.now<f.timer.end)!isEmpty(f.timingFunction)&&
isFunction(f.timingFunction)?e=new c(f.timingFunction(b.now-f.timer.start,a.x,b.amountOfChange(a.x,d.x),f.timer.duration),f.timingFunction(b.now-f.timer.start,a.y,b.amountOfChange(a.y,d.y),f.timer.duration),f.timingFunction(b.now-f.timer.start,a.width,b.amountOfChange(a.width,d.width),f.timer.duration),f.timingFunction(b.now-f.timer.start,a.height,b.amountOfChange(a.height,d.height),f.timer.duration)):!isEmpty(f.timingFunction)&&isObject(f.timingFunction)&&(e=new c(f.timingFunction.x(b.now-f.timer.start,
a.x,b.amountOfChange(a.x,d.x),f.timer.duration),f.timingFunction.y(b.now-f.timer.start,a.y,b.amountOfChange(a.y,d.y),f.timer.duration),f.timingFunction.width(b.now-f.timer.start,a.width,b.amountOfChange(a.width,d.width),f.timer.duration),f.timingFunction.height(b.now-f.timer.start,a.height,b.amountOfChange(a.height,d.height),f.timer.duration)));else{if(!isEmpty(f.drawAfterAnimate)&&!1===f.drawAfterAnimate)return;e=d}m=e.getCenter();!isEmpty(f.startAlpha)&&!isEmpty(f.endAlpha)?(g=f.startAlpha+b.delta(f.startAlpha,
f.endAlpha,f.timer.end-f.timer.start)*(b.now-f.timer.start),0>g?g=0:1<g&&(g=1)):g=1}b.context.save();b.context.setTransform(1,0,0,1,0,0);b.context.translate(m.x,m.y);b.context.rotate(i);b.context.translate(-m.x,-m.y);b.context.globalAlpha=g;b.context.fillStyle=f.color;b.context.fillRect(e.x,e.y,e.width,e.height);b.context.restore()}};return new function(){var a=this,b=0,c=[];a.createScene=function(a){for(var b=0;b<c.length;b++)if(c[b].getElementId()==a)return c[b];a=new d(a);c.push(a);return a};a.startScene=
function(c){if(c.start)return!1;try{if(!c.isReady())throw"scene is not ready";}catch(d){if(1E3<b)throw d;setTimeout(function(){a.startScene(c);b++},10);return!1}c.__start=!0;c.setStartTime();c.animate()};a.linearTween=function(a,b,c,d){return c*a/d+b};a.easeInQuad=function(a,b,c,d){a/=d;return c*a*a+b};a.easeOutQuad=function(a,b,c,d){a/=d;return-c*a*(a-2)+b};a.easeInOutQuad=function(a,b,c,d){a/=d/2;if(1>a)return c/2*a*a+b;a--;return-c/2*(a*(a-2)-1)+b};a.easeInCubic=function(a,b,c,d){a/=d;return c*
a*a*a+b};a.easeOutCubic=function(a,b,c,d){a/=d;a--;return c*(a*a*a+1)+b};a.easeInOutCubic=function(a,b,c,d){a/=d/2;if(1>a)return c/2*a*a*a+b;a-=2;return c/2*(a*a*a+2)+b};a.easeInQuart=function(a,b,c,d){a/=d;return c*a*a*a*a+b};a.easeOutQuart=function(a,b,c,d){a/=d;a--;return-c*(a*a*a*a-1)+b};a.easeInOutQuart=function(a,b,c,d){a/=d/2;if(1>a)return c/2*a*a*a*a+b;a-=2;return-c/2*(a*a*a*a-2)+b};a.easeInQuint=function(a,b,c,d){a/=d;return c*a*a*a*a*a+b};a.easeOutQuint=function(a,b,c,d){a/=d;a--;return c*
(a*a*a*a*a+1)+b};a.easeInOutQuint=function(a,b,c,d){a/=d/2;if(1>a)return c/2*a*a*a*a*a+b;a-=2;return c/2*(a*a*a*a*a+2)+b};a.easeInSine=function(a,b,c,d){return-c*Math.cos(a/d*(Math.PI/2))+c+b};a.easeOutSine=function(a,b,c,d){return c*Math.sin(a/d*(Math.PI/2))+b};a.easeInOutSine=function(a,b,c,d){return-c/2*(Math.cos(Math.PI*a/d)-1)+b};a.easeInExpo=function(a,b,c,d){return c*Math.pow(2,10*(a/d-1))+b};a.easeOutExpo=function(a,b,c,d){return c*(-Math.pow(2,-10*a/d)+1)+b};a.easeInOutExpo=function(a,b,
c,d){a/=d/2;if(1>a)return c/2*Math.pow(2,10*(a-1))+b;a--;return c/2*(-Math.pow(2,-10*a)+2)+b};a.easeInCirc=function(a,b,c,d){a/=d;return-c*(Math.sqrt(1-a*a)-1)+b};a.easeOutCirc=function(a,b,c,d){a/=d;a--;return c*Math.sqrt(1-a*a)+b};a.easeInOutCirc=function(a,b,c,d){a/=d/2;if(1>a)return-c/2*(Math.sqrt(1-a*a)-1)+b;a-=2;return c/2*(Math.sqrt(1-a*a)+1)+b};a.easeTitleMove=function(a,b,c,d){return b+1.3*c*Math.sin(130*(a/d)*Math.PI/180)};a.easeStarMove=function(a,b,c,d){return b+c*Math.sin(180*(a/d)*Math.PI/
180)};a.easeSinUp=function(a,b,c,d){return 0.05*c*Math.sin(720*(a/d)*(Math.PI/180))+b};a.easeSinUp2=function(a,b,c,d){return 0.05*c*Math.sin(1440*(a/d)*(Math.PI/180))+b}}});
$tenjoh.addComponent("UI.LayeredImage",function(){return new function(){var a=function(a,c,b){var g=this,f=[];g._element=a;g._width=c;g._height=b;g._element.style.position="relative";g._element.style.width=g._width+"px";g._element.style.height=g._height+"px";g._element.id||(g._element.id=$tenjoh.uniqueId());g.add=function(a,b){if(!a._element.id)a._element.id=g._element.id+"."+$tenjoh.uniqueId();a={layer:a,id:a._element.id,order:b};f.push(a);return a.id};g.remove=function(a){for(var b=0;b<f.length;b++)if(f[b].id==
a){f.splice(b,1);break}};g.refresh=function(){f.sort(function(a,b){return a.order-b.order});for(var a=0;a<f.length;a++){f[a].layer.refresh();g._element.appendChild(f[a].layer._element)}}},c=function(){var a=this;a._element=document.createElement("div");a.url=null;a.width=0;a.height=0;a.x=0;a.y=0;a.refresh=function(){if(isEmpty(a.url))throw Error("ImageLayer.url is not defined.");a._element.style.position="absolute";a._element.style.width=a.width+"px";a._element.style.height=a.height+"px";a._element.style.left=
a.x+"px";a._element.style.top=a.y+"px";a._element.style.backgroundImage="url("+a.url+")";a._element.style.backgroundRepeat="no-repeat"}},g=function(){var a=this,c=function(b){var c=document.getElementById(a._name),e;if(1>=b.length)throw Error("keyframes must set at least 1 keyframe.");b.sort(function(a,b){return a.position-b.position});c||(c=document.createElement("style"),c.id=a._name,$root.rootElement.appendChild(c));c.innerHTML="@-webkit-keyframes "+a._name+" { ";for(var g=0;g<b.length;g++){c.innerHTML+=
b[g].position+"% {";for(e in b[g].styles)b[g].styles.hasOwnProperty(e)&&(c.innerHTML+=e+": "+b[g].styles[e]+"; ");c.innerHTML+="} "}c.innerHTML+=" }"};a._element=document.createElement("div");a._name="\u02dd\u02ddDOMAnimationLayer_"+$tenjoh.uniqueId();a.url=null;a.width=0;a.height=0;a.x=0;a.y=0;a.duration=0;a.iteration="infinite";a.direction="linear";a.delay=0;a.keyframes=[];a.addKeyframe=function(b,c){"from"==b&&(b=0);"to"==b&&(b=100);a.keyframes.push({position:b,styles:c})};a.refresh=function(){if(isEmpty(a.url))throw Error("ImageLayer.url is not defined.");
if(isEmpty(a.keyframes))throw Error("Animation Keyframe is not defined.");a._element.style.position="absolute";a._element.style.width=a.width+"px";a._element.style.height=a.height+"px";a._element.style.left=a.x+"px";a._element.style.top=a.y+"px";a._element.style.backgroundImage="url("+a.url+")";a._element.style.backgroundRepeat="no-repeat";a._element.style.webkitAnimationName=a._name;a._element.style.webkitAnimationDuration=""+a.duration+"s";a._element.style.webkitAnimationIterationCount=a.iteration;
a._element.style.webkitAnimationDirection=a.direction;a._element.style.webkitAnimationDelay=a.delay;c(a.keyframes)}};this.createFrame=function(c,e,b){return new a(c,e,b)};this.createImageLayer=function(){return new c};this.createAnimationLayer=function(){return new g}}});
$tenjoh.__widgets.Repeat=function(){var a=this,c=function(a,c,e){var b;return a.replace(/\{\{[^\}]+\}\}/gm,function(a){a=a.replace(RegExp(e.item+"([\\.\\s])","gm"),function(a,b){return e.from+"."+c+b});return a=a.replace(/\$index[\s]*([\+\-\*\/%]?)[\s]*([0-9]*)/gm,function(a,e,g){""==e&&""==g?b=c:""!=e&&""!=g&&("+"==e?b=c+Number(g):"-"==e?b=c-g:"*"==e?b=c*g:"/"==e?b=c/g:"%"==e&&(b=c%g));return b})})};a.Handler=function(g,d,e){var b=this;b.element=g;b.template=d;b.partial=e;b.from=a.from;b.item=a.item;
b.execute=function(){var a=b.partial.getController(),d,e="";if(!b.from||!b.item||isUndefined(a[b.from]))return!1;for(var a=a[b.from],g=0;g<a.length;g++)d=c(b.template,g,b),e+=d;b.element.innerHTML=e;$tenjoh.Compiler.compileElement(b.element,b.partial);document.dispatchEvent($tenjoh.Event.onPartialLoad)}};a.load=function(g){var d=a.__caller.getController(),e,b,i="",f=g.innerHTML;if(!a.from||!a.item||isUndefined(d[a.from]))return!1;e=d[a.from];for(var h=0;h<e.length;h++)b=c(f,h,a),i+=b;g.innerHTML=
i;$tenjoh.Compiler.compileElement(g,a.__caller);g=new a.Handler(g,f,a.__caller);d.getWatcher().handlers.push({name:a.from,handler:g})}};
$tenjoh.addWidget("LazyImage",function(){var a=this;a.load=function(c){var g,d,e,b,i,f,h=!1,k=a.ringradius||25,n=a.circleradius||10,j=a.numcircles||8,o=a.circlecolor||"pink",p,m,l,q,s=360/j;if("IMG"==c.nodeName){if(!c.hasAttribute("width"))throw Error("width attribute is not defined");if(!c.hasAttribute("height"))throw Error("height attribute is not defined");document.getElementById("TenjohLazyImage")||(b=document.createElement("style"),b.id="TenjohLazyImage",b.innerHTML="@-webkit-keyframes TenjohLazyImage { 0%{-webkit-transform:scale(1);} 100%{-webkit-transform:scale(.3);} }",
$root.rootElement.appendChild(b));g=c.getAttribute("data-src");if(!$tenjoh.Compiler.hasDoubleCurly(g)){c.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAMAAAAoyzS7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNS4xIE1hY2ludG9zaCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpGREI5QzE2RjdENUYxMUUxQjg2NURGODZFMERFNjJFQyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpGREI5QzE3MDdENUYxMUUxQjg2NURGODZFMERFNjJFQyI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZEQjlDMTZEN0Q1RjExRTFCODY1REY4NkUwREU2MkVDIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkZEQjlDMTZFN0Q1RjExRTFCODY1REY4NkUwREU2MkVDIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+dWGPQQAAAAZQTFRF////AAAAVcLTfgAAAAF0Uk5TAEDm2GYAAAAMSURBVHjaYmAACDAAAAIAAU9tWeEAAAAASUVORK5CYII=";
e=document.createElement("div");e.style.width=c.getAttribute("width")+"px";e.style.height=c.getAttribute("height")+"px";e.style.position="relative";p=c.getAttribute("width")/2>>0;m=c.getAttribute("height")/2>>0;for(var r=0;r<j;r++)l=k*Math.sin(s*r*(Math.PI/180))>>0,q=k*Math.cos(s*r*(Math.PI/180))>>0,b=document.createElement("div"),b.style.width=b.style.height=n+"px",b.style.position="absolute",b.style.left=l+p+"px",b.style.top=q+m+"px",b.style.backgroundColor=o,b.style.webkitBorderRadius=n+"px",b.style.webkitAnimationName=
"TenjohLazyImage",b.style.webkitAnimationDuration=""+(j-1)/10+"s",b.style.webkitAnimationIterationCount="infinite",b.style.webkitAnimationDirection="linear",b.style.webkitAnimationDelay=""+(r+1)/10+"s",e.appendChild(b);d=new Image;d.src=g;f=d.addEventListener("load",function(){h=true;d.removeEventListener("load",f);var a=setInterval(function(){e.parentNode&&e.parentNode.replaceChild(c,e);c.src=g;clearInterval(a)},100)});i=document.addEventListener("onPartialLoad",function(){document.removeEventListener("onPartialLoad",
i);var a=setInterval(function(){if(c.parentNode){h||c.parentNode.replaceChild(e,c);clearInterval(a)}},100)})}}}});
$tenjoh.addWidget("Show",function(){var a=this;a.Handler=function(c,g,d){var e=this;e.element=c;e.template=g;e.partial=d;e.param=a.param;e.condition=a.condition;e.execute=function(){var a=e.partial.getController(),d="";if(null==e.param||null==e.condition||isUndefined(a.getProperty(e.param)))return!1;""+a.getProperty(e.param)==""+e.condition?(d=e.template,c.style.display=""):c.style.display="none";e.element.innerHTML=d;$tenjoh.Compiler.compileElement(e.element,e.partial)}};a.load=function(c){var g=
a.__caller.getController(),d="",e=c.innerHTML;if(null==a.param||null==a.condition||isUndefined(g.getProperty(a.param)))return!1;""+g.getProperty(a.param)==""+a.condition?(d=e,c.style.display=""):c.style.display="none";c.innerHTML=d;$tenjoh.Compiler.compileElement(c,a.__caller);c=new a.Handler(c,e,a.__caller);g.getWatcher().handlers.push({name:a.param,handler:c})}});
$tenjoh.addWidget("Hide",function(){return new function(){var a=this;a.Handler=function(c,g,d){var e=this;e.element=c;e.template=g;e.partial=d;e.condition=a.condition;e.execute=function(){var a=e.partial.__controller,c="";if(null==e.condition||isUndefined(a.getProperty(e.condition)))return!1;a=a.getProperty(e.condition);if(!1==a||"false"==a||""==a||null==a)a=e.template.replaceAll(e.item,e.condition),c+=a;e.element.innerHTML=c;$tenjoh.Compiler.compileElement(e.element,e.partial)}};a.load=function(c){var g=
a.__caller.getController(),d,e="",b=c.innerHTML;if(null==a.condition||isUndefined(g.getProperty(a.condition)))return!1;d=g.getProperty(a.condition);if(!1==d||"false"==d||""==d||null==d)d=b.replaceAll(a.item,a.condition),e+=d;c.innerHTML=e;$tenjoh.Compiler.compileElement(c,a.__caller);c=new a.Handler(c,b,a.__caller);g.getWatcher().handlers.push({name:a.from,handler:c})}}});
(function(){var a=function(a,g,d,e){return e?$tenjoh.DOM.createElement(a,g,d):g};$tenjoh.UI.Fillter.addFilter("$div",function(c,g,d,e){return a("div",c,d,e)});$tenjoh.UI.Fillter.addFilter("$span",function(c,g,d,e){return a("span",c,d,e)});$tenjoh.UI.Fillter.addFilter("$img",function(c,g,d,e){return a("img",c,d,e)});$tenjoh.UI.Fillter.addFilter("$p",function(c,g,d,e){return a("p",c,d,e)});$tenjoh.UI.Fillter.addFilter("$text",function(c,g,d,e){return a("text",c,d,e)});$tenjoh.UI.Fillter.addFilter("$password",
function(c,g,d,e){return a("password",c,d,e)});$tenjoh.UI.Fillter.addFilter("$submit",function(c,g,d,e){return a("submit",c,d,e)});$tenjoh.UI.Fillter.addFilter("$reset",function(c,g,d,e){return a("reset",c,d,e)});$tenjoh.UI.Fillter.addFilter("$hidden",function(c,g,d,e){return a("hidden",c,d,e)});$tenjoh.UI.Fillter.addFilter("$checkbox",function(c,g,d,e){return a("checkbox",c,d,e)});$tenjoh.UI.Fillter.addFilter("$radio",function(c,g,d,e){return a("radio",c,d,e)});$tenjoh.UI.Fillter.addFilter("$textarea",
function(c,g,d,e){return a("textarea",c,d,e)});$tenjoh.UI.Fillter.addFilter("$button",function(c,g,d,e){return a("button",c,d,e)});$tenjoh.UI.Fillter.addFilter("$a",function(c,g,d,e){return a("a",c,d,e)})})();
$tenjoh.UI.Fillter.addFilter("$date",function(a,c,g){a=new Date(a);if(isEmpty(g)||isEmpty(g.format))return sprintf("%s/%s/%s %s:%s:%s",zeroPadding(""+a.getFullYear(),4),zeroPadding(""+a.getMonth()+1,2),zeroPadding(""+a.getDate(),2),zeroPadding(""+a.getHours(),2),zeroPadding(""+a.getMinutes(),2),zeroPadding(""+a.getSeconds(),2));if("mm/dd"==g.format)return sprintf("%s/%s",zeroPadding(""+a.getMonth()+1,2),zeroPadding(""+a.getDate(),2));if("yyyy/mm/dd"==g.format)return sprintf("%s/%s/%s",zeroPadding(""+
a.getFullYear(),4),zeroPadding(""+a.getMonth()+1,2),zeroPadding(""+a.getDate(),2));if("mm/dd hh:mm"==g.format)return sprintf("%s/%s %s:%s",zeroPadding(""+a.getMonth()+1,2),zeroPadding(""+a.getDate(),2),zeroPadding(""+a.getHours(),2),zeroPadding(""+a.getMinutes(),2))});$tenjoh.UI.Fillter.addFilter("$before",function(a,c,g){return isUndefined(g.param)?a:g.param+a});$tenjoh.UI.Fillter.addFilter("$after",function(a,c,g){return isUndefined(g.param)?a:a+g.param});
$tenjoh.UI.Fillter.addFilter("$figure",function(a){return(""+a).replace(/([0-9]+?)(?=(?:[0-9]{3})+$)/g,"$1,")});
$tenjoh.RootController=function(){var a=this;a.__controllers=[];a.getController=function(c){return a.__controllers[c]};a.setController=function(c,g){a.__controllers[c]=g};a.__partials={};a.getPartial=function(c){return a.__partials[c]};a.setPartial=function(c){a.__partials[c.name]=c};a.init=function(){a.rootElement=document.getElementById("TenjohRoot");if(isEmpty(a.rootElement))throw Error("no root element defined");$tenjoh.Router.start()};a.discardPartial=function(c){a.getPartial(c).getView().innerHTML=
"";delete a.__partials[c]}};
$tenjoh.Controller=function(a){var c=this,g=function(c){if(c.hasAttribute("data-template")){var e=/([^:\s]+)\s*:\s*([^0-9:\s'"][^:\s'"]+)/g;c.getAttribute("data-template").split("|").slice(1).forEach(function(b){var b=b.trim(),g;if(-1!=b.indexOf(":"))for(;g=e.exec(b);)a.getController().getWatcher().watchAttribute(c,g[1],g[2])})}};c.__partial=a;c.getPartial=function(){return c.__partial};c.__watcher=new function(){var a=this;a.__controller=null;a.setController=function(c){a.__controller=c};a.handlers=
[];a.TagValueHandler=function(){this.element=null;this.execute=function(c){if(isEmpty(this.element)||isEmpty(c))return!1;c=$tenjoh.View.compileDoubleCurly(this.element.getAttribute("data-template"),a.__controller);$tenjoh.DOM.setValue(this.element,c)}};a.TagAttributeHandler=function(){var a=this;a.element=null;a.attributeName=null;a.execute=function(b){if(isEmpty(this.element)||isEmpty(this.attributeName)||isEmpty(b))return!1;a.element.setAttribute(a.attributeName,b)}};a.watchValue=function(c,b){var g=
new a.TagValueHandler;g.element=c;a.handlers.push({name:b,handler:g})};a.watchAttribute=function(c,b,g){var f=new a.TagAttributeHandler;f.element=c;f.attributeName=b;a.handlers.push({name:g,handler:f})};a.sync=function(c){var b;if(isEmpty(c)||"*"==c)for(var g=0;g<a.handlers.length;g++)b=a.handlers[g],b.handler.execute(a.__controller.getProperty(b.name));else{for(g=0;g<a.handlers.length;g++)b=a.handlers[g],b.name&&b.name==c&&b.handler.execute(a.__controller.getProperty(c));b=a.__controller.getProperty(c);
if(typeof b==$object)for(var f in b)b.hasOwnProperty(f)&&a.sync(c+"."+f)}}};c.getWatcher=function(){return c.__watcher};c.getProperty=function(a,e){var b=a.indexOf(".");isUndefined(e)&&(e=this);return-1==b?e[a]:c.getProperty(a.slice(b+1),e[a.slice(0,b)])};c.setProperty=function(a,e,b){var g=a.indexOf(".");isUndefined(b)&&(b=this);if(-1==g)b[a]=e;else return c.setProperty(a.slice(g+1),e,b[a.slice(0,g)])};c.discard=function(){c.__partial.discard()};c.bindElement=function(c){if(c.hasAttribute("data-property-name")){a.getController().getWatcher().watchValue(c,
c.getAttribute("data-property-name"));g(c);var e,b="onblur,onchange,onclick,onfocus,onresize,onscroll,ontouchstart,ontouchend,ontouchmove,ontouchcancel".split(","),i=c.attributes,f;if(c.hasAttributes())for(var h=i.length-1;0<=h;h--)e=i[h],-1!=b.indexOf(e.name)&&(e=b[b.indexOf(e.name)],f=c.getAttribute(e),c.setAttribute(e,f));b=["oninput","onchange"];for(h=0;h<b.length;h++)c.name&&(i=c.getAttribute(b[h])||"",i+=sprintf("$root.getPartial('%s').getController().setProperty('%s', event.target.value);",
a.name,c.name),i+=sprintf("$root.getPartial('%s').getController().getWatcher().sync('%s');",a.name,c.name),c.setAttribute(b[h],i))}}};
